<html>
<head>
  <title>Top Rock</title>
  <link rel="stylesheet" href="../styles.css">
</head>
<body>
  <header>
    <div id="statistics">Statistics</div>
    <div id="avg_years"><span>Average years since formation</span>
      <%=  @artists.average_age %>
    </div>
    <div id="avg_length"><span>Average album length</span>
      <%= @artists.average_album_length %>
    </div>
    <div id="total_albums"><span>Total albums</span>
      <%= @artists.album_count %>
    </div>
    <div id="cities">
      <span>Cities of origin</span>
      <ul>
      <% @artists.cities.each do |artist| %>
        <li><%= artist.origin %></li>
      <% end %>
      </ul>
    </div>
  </header>
  <main>
    <% @artists.each do |artist| %>
    <section id="<%= artist.photo %>">
      <div class="artist_glamour">
        <div>
          <a href="../artists/<%= artist.id %>">
            <img src="../img/artists/small/<%= artist.photo %>.jpg"><br>
            <span class="name"><%= artist.name %></span>
          </a><br>
          <ul>
            <li><span>Formed in</span><%= artist.formation_year %></li>
            <li><span>Origin</span><%= artist.origin %></li>
            <li><span>Albums</span><%= artist.album_count %></li>
          </ul>
        </div>
      </div>
      <div class="artist_details">
        <div class="albums">
          <% artist.albums.order(release_date: :desc).each do |album| %>
          <div class="album">
            <figure>
              <figcaption><%= album.name %></figcaption>
              <img src="../img/albums/<%= album.photo %>.jpg">
            </figure>
            <ul>
              <li><span>Released</span><%= album.release_date %></li>
              <li><span>Tracks</span><%= album.track_count %></li>
              <li><span>Length</span><%= album.duration %></li>
            </ul>
          </div>
          <% end %>
        </div>
      </div>
    </section>
    <% end %>
  </main>
</body>
</html>
